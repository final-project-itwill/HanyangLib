<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="survey">

	<select id="list" resultType="kr.co.itwill.survey.SurveyDTO">
		SELECT sv_code, sv_comcode, sv_id, sv_title, sv_des, sv_rdate, sv_edate, sv_max, sv_status
		FROM survey
		ORDER BY sv_code
	</select>
	
	<select id="title" resultType="kr.co.itwill.survey.DsurveyDTO">
		SELECT dsv_subject, dsv_type, dsv_order
		FROM dsurvey
		WHERE dsv_code = #{dsv_code}
	</select>
	
	<select id="choice" resultType="kr.co.itwill.survey.ChoiceDTO">
		SELECT ch_no, ch_code, ch_dsvno, ch_order, ch_type, ch_anscode, ch_content
		FROM	choice
		WHERE ch_code = #{dsv_code}
	</select>
	
	<insert id="insert" parameterType="kr.co.itwill.survey.AnswerDTO">
	 	INSERT INTO answer(ans_code, ans_dsvno, ans_order, ans_anscode, ans_id, ans_content)
		VALUES (#{ch_code}, #{ch_dsvno}, #{ch_order}, #{ch_anscode}, "cloudd81", #{ch_content}  )
	 </insert>
	
	
	<!-- answer -->
	<insert id="surveyWrite" parameterType="kr.co.itwill.survey.SurveyDTO">
		INSERT INTO survey( sv_code, sv_comcode, sv_id, sv_title, sv_des, sv_edate, sv_max )
		VALUES ( "s221121-003","com002", "mimimi05", #{sv_title}, #{sv_des}, now(), 3 )
	</insert>
	
	<delete id="delete">
		DELETE FROM survey
        WHERE sv_code = #{sv_code}
	</delete>
	
	<select id="read" resultType="kr.co.itwill.survey.SurveyDTO">
		SELECT sv_code, sv_comcode, sv_id, sv_title, sv_des, sv_rdate, sv_edate, sv_max, sv_status
		FROM survey
		WHERE sv_code = #{sv_code}
	</select>
	
	<update id="update">
		UPDATE survey
        SET sv_title    = #{sv_title}
            ,sv_des    = #{sv_des}
        WHERE sv_code  = #{sv_code}
	</update>
	
</mapper>
